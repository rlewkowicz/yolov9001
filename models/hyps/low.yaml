optimizer:
  SGD:
    lr0: 0.02        # base LR
    lrf: 0.02        # final LR fraction for cosine decay
    momentum: 0.937  # SGD momentum
    warmup_momentum: 0.937   # start momentum during warmup
    warmup_epochs: 0.0     # linear warmup duration (epochs)
    warmup_bias_lr: 1   # bias-group LR at start of warmup
    nesterov: true
    weight_decay: 0.0005
    decoupled_lr:
      backbone:
        lr_scale: 1.0
      head:
        lr_scale: 1.0

min_stride_box_alpha: 0.0

hsv_h: 0.015
hsv_s: 0.4
hsv_v: 0.1
translate: 0.1
scale: 0.5
fliplr: 0.5
mosaic: 0.9

assign_mode: simota
assign_radius: 3.0
assign_lambda_iou: 3.5
assign_topq: 10

dino:
  enabled: true
  distillation: true
  objfor02: true
  resolution: 448
  # Optional: stop DINO after no improvement (epoch-avg dino_total)
  patience_epochs: 1  # set >0 to enable, e.g., 3
  patience_delta: 0.0  # absolute tolerance for improvement
  # Decays (per-epoch config, per-step computed):
  # Linearly decay distillation weights (alpha/beta/gamma) to zero over N epochs
  distill_decay_epochs: 4
  # Linearly decay objfor02 prior influence to zero over N epochs
  objfor02_decay_epochs: 3
  # After DINO turns off (via patience), optionally switch optimizer and keep EMA
  # Provide a full optimizer block; omit or set to null to keep current optimizer
  optimizer_after_off:
    LION:
      lr0: 0.003
      lrf: 0.01
      b1: 0.9
      b2: 0.999
      alpha: 30
      bias_correction: false
      weight_decay: 0.004
      decoupled_lr:
        backbone:
          lr_scale: 1.0
        head:
          lr_scale: 1.0
  reg_weight_with_saliency: true
  reg_weight_floor: 0.5
  reg_weight_power: 2.0
  centroid_align: false
  centroid_weight: 0.5
  centroid_max_epochs: 4
  max_epochs: 200
  every_n: 1
  quant: int4
